[dag]
max_parallel = 4

[barrier:download_complete]
[barrier:processing_complete]

[job:download_users]
command = echo "Downloading user data..." && sleep 2
deps = 
barrier = download_complete

[job:download_products]
command = echo "Downloading product data..." && sleep 3
deps = 
barrier = download_complete

[job:download_orders]
command = echo "Downloading order data..." && sleep 1
deps = 
barrier = download_complete

[job:process_data]
command = echo "Processing all downloaded data..." && sleep 4
deps = download_users,download_products,download_orders
barrier = processing_complete

[job:validate_data]
command = echo "Validating processed data..." && sleep 2
deps = download_users,download_products,download_orders
barrier = processing_complete

[job:generate_reports]
command = echo "Generating reports..." && sleep 3
deps = process_data,validate_data
barrier = 

[job:send_notifications]
command = echo "Sending notifications..." && sleep 1
deps = generate_reports
barrier = 

[job:cleanup]
command = echo "Cleaning up temporary files"
deps = send_notifications
barrier = 
